# $Id: configure.in,v 1.5 2001/10/23 08:45:18 christof Exp $

AC_INIT(Artikel/ArtikelBase.h)

AM_INIT_AUTOMAKE(libcommon++, 0.0)
AM_CONFIG_HEADER(ManuProCConfig.h)

AC_PREFIX_DEFAULT(/usr/local)

AC_PROG_CXX
AM_PROG_LIBTOOL
AC_LANG_CPLUSPLUS

AC_SUBST(CFLAGS)
AC_SUBST(CPPFLAGS)
AC_SUBST(LDFLAGS)
AC_SUBST(CXXFLAGS)

PETIG_CHECK_POSTGRES

# AC_ARG_ENABLE(debug,
#   [  --disable-debug   disable debugging (turn on cpcline, omit -g)],
#   [enable_debug=$enableval], enable_debug=1 )

# if test $enable_debug -eq 0 
# then 
# #  CPCOPT=
#   CFLAGS="$CXXFLAGS"
# else
#   CFLAGS="-g $CXXFLAGS"
# fi

AC_MSG_CHECKING(for standard database name)
DEFAULT_DB=$USER
DEFAULT_DBHOST="localhost"
case `hostname -f` in
   petig.petig.de|petig.petig-baender.de) 
   	DEFAULT_DB=petigdb DEFAULT_DBHOST=petig ;;
   *.petig.de|*.petig-baender.de) DEFAULT_DB=petigdb ;;
   *.jacek.de) DEFAULT_DB=petigdb ;;
   Tiger) DEFAULT_DB=petigdb ;;
esac
AC_DEFINE_UNQUOTED(DEFAULT_DB, "$DEFAULT_DB" )
AC_DEFINE_UNQUOTED(DEFAULT_DBHOST, "$DEFAULT_DBHOST" )
AC_MSG_RESULT($DEFAULT_DB@$DEFAULT_DBHOST)

LIBS=@ECPG_LIBS@

AC_MSG_CHECKING(Petig Extensions)
AC_ARG_ENABLE(petig,[  --en/disable-petig	en/disable Petig extensions],
	petig_exts="$enableval",
	[  case `hostname -f` in
		*.petig-baender.de|Tiger) petig_exts=yes ;;
		*) petig_exts=no ;;
	   esac
	])
if test "$petig_exts" != "no" ; then
	AC_MSG_RESULT([enabled])
	AC_DEFINE(PETIG_EXTENSIONS,1,[whether Petig extensions are enabled])
else
	AC_MSG_RESULT([disabled])
fi
AC_MSG_CHECKING(Mabella Extensions)
AC_ARG_ENABLE(mabella,[  --en/disable-mabella	en/disable Mabella extensions],
	mabella_exts="$enableval",
	[  case `hostname -f` in
		*.mabella.de|*.jacek.de) mabella_exts=yes ;;
		*) mabella_exts=no ;;
	   esac
	])
if test "$mabella_exts" != "no" ; then
	AC_MSG_RESULT([enabled])
	AC_DEFINE(MABELLA_EXTENSIONS,1,[whether Mabella extensions are enabled])
else
	AC_MSG_RESULT([disabled])
fi

AC_OUTPUT(Makefile Artikel/Makefile Auftrag/Makefile \
	Aux/Makefile Bank/Makefile ExtBezSchema/Makefile Ketten/Makefile \
	Kunde/Makefile Lieferschein/Makefile ostream/Makefile \
	tests/Makefile Material/Makefile ProdInstanz/Makefile Faeden/Makefile )

