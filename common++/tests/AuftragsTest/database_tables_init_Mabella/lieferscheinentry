--
-- PostgreSQL database dump
--

\connect - jacek

SET search_path = public, pg_catalog;

DROP TRIGGER "RI_ConstraintTrigger_1752153" ON public.lieferscheinentry;
ALTER TABLE ONLY public.lieferscheinentry DROP CONSTRAINT lieferscheinentry_pkey;
DROP INDEX public.lieferscheinentry_artid;
DROP TABLE public.lieferscheinentry;
--
-- TOC entry 2 (OID 960321)
--

CREATE TABLE lieferscheinentry (
    lfrsid numeric(6,0) NOT NULL,
    zeile numeric(3,0) NOT NULL,
    artikelid integer NOT NULL,
    refauftragid numeric(6,0),
    stueck numeric(6,0),
    refzeilennr numeric(3,0),
    palette numeric(3,0),
    menge numeric(8,2),
    zusatzinfo boolean,
    instanz integer
);


--
-- TOC entry 3 (OID 960321)
--

REVOKE ALL ON TABLE lieferscheinentry FROM PUBLIC;


--
-- TOC entry 4 (OID 1752120)
--

CREATE INDEX lieferscheinentry_artid ON lieferscheinentry USING btree (artikelid);


--
-- TOC entry 5 (OID 960323)
--

ALTER TABLE ONLY lieferscheinentry
    ADD CONSTRAINT lieferscheinentry_pkey PRIMARY KEY (lfrsid, zeile);


--
-- TOC entry 6 (OID 1752153)
--

CREATE CONSTRAINT TRIGGER "<unnamed>"
    AFTER INSERT OR UPDATE ON lieferscheinentry
    FROM auftrag
    NOT DEFERRABLE INITIALLY IMMEDIATE
    FOR EACH ROW
    EXECUTE PROCEDURE "RI_FKey_check_ins" ('<unnamed>', 'lieferscheinentry', 'auftrag', 'UNSPECIFIED', 'refauftragid', 'auftragid');


